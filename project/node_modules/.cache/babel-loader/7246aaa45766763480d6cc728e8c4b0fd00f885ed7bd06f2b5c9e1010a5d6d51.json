{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport leaflet from 'leaflet';\nfunction useMap(_ref) {\n  _s();\n  let {\n    mapRef,\n    offer\n  } = _ref;\n  const [map, setMap] = useState(null);\n  const isRenderedRef = useRef(false);\n  const [OF, setOf] = useState(offer);\n  useEffect(() => {\n    setOf(offer);\n    if (mapRef.current !== null && !isRenderedRef.current) {\n      const instance = leaflet.map(mapRef.current, {\n        center: {\n          lat: offer.city.location.latitude,\n          lng: offer.city.location.longitude\n        },\n        zoom: 13\n      });\n      leaflet.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n      }).addTo(instance);\n      setMap(instance);\n      isRenderedRef.current = true;\n    }\n  }, [mapRef, offer, map]);\n  return map;\n}\n_s(useMap, \"pX0m9IR80Zncg8iYIeZvewT73Gk=\");\nexport default useMap;","map":{"version":3,"names":["useEffect","useRef","useState","leaflet","useMap","_ref","_s","mapRef","offer","map","setMap","isRenderedRef","OF","setOf","current","instance","center","lat","city","location","latitude","lng","longitude","zoom","tileLayer","attribution","addTo"],"sources":["C:/Users/Cody/Documents/GitHub/2205815-six-cities-simple-12/project/src/hooks/use-map/use-map.tsx"],"sourcesContent":["import { MutableRefObject, useEffect, useRef, useState } from 'react';\nimport leaflet from 'leaflet';\nimport { Map } from 'leaflet';\nimport { Offer } from '../../types/offers';\n\ntype useMapProps = {\n  mapRef: MutableRefObject<HTMLElement | null>;\n  offer: Offer;\n}\n\nfunction useMap({mapRef, offer}: useMapProps): Map | null {\n  const [map, setMap] = useState<Map | null>(null);\n  const isRenderedRef = useRef(false);\n  const [OF, setOf] = useState(offer);\n\n\n  useEffect(() => {\n    setOf(offer);\n    if (mapRef.current !== null && !isRenderedRef.current) {\n      const instance = leaflet.map(mapRef.current, {\n        center: {\n          lat: offer.city.location.latitude,\n          lng: offer.city.location.longitude,\n        },\n        zoom: 13,\n      });\n\n      leaflet\n        .tileLayer(\n          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n          {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          },\n        )\n        .addTo(instance);\n\n      setMap(instance);\n      isRenderedRef.current = true;\n    }\n\n  }, [mapRef, offer, map]);\n\n  return map;\n}\n\nexport default useMap;\n"],"mappings":";AAAA,SAA2BA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACrE,OAAOC,OAAO,MAAM,SAAS;AAS7B,SAASC,MAAMA,CAAAC,IAAA,EAA2C;EAAAC,EAAA;EAAA,IAA1C;IAACC,MAAM;IAAEC;EAAkB,CAAC,GAAAH,IAAA;EAC1C,MAAM,CAACI,GAAG,EAAEC,MAAM,CAAC,GAAGR,QAAQ,CAAa,IAAI,CAAC;EAChD,MAAMS,aAAa,GAAGV,MAAM,CAAC,KAAK,CAAC;EACnC,MAAM,CAACW,EAAE,EAAEC,KAAK,CAAC,GAAGX,QAAQ,CAACM,KAAK,CAAC;EAGnCR,SAAS,CAAC,MAAM;IACda,KAAK,CAACL,KAAK,CAAC;IACZ,IAAID,MAAM,CAACO,OAAO,KAAK,IAAI,IAAI,CAACH,aAAa,CAACG,OAAO,EAAE;MACrD,MAAMC,QAAQ,GAAGZ,OAAO,CAACM,GAAG,CAACF,MAAM,CAACO,OAAO,EAAE;QAC3CE,MAAM,EAAE;UACNC,GAAG,EAAET,KAAK,CAACU,IAAI,CAACC,QAAQ,CAACC,QAAQ;UACjCC,GAAG,EAAEb,KAAK,CAACU,IAAI,CAACC,QAAQ,CAACG;QAC3B,CAAC;QACDC,IAAI,EAAE;MACR,CAAC,CAAC;MAEFpB,OAAO,CACJqB,SAAS,CACR,0EAA0E,EAC1E;QACEC,WAAW,EAAE;MACf,CAAC,CACF,CACAC,KAAK,CAACX,QAAQ,CAAC;MAElBL,MAAM,CAACK,QAAQ,CAAC;MAChBJ,aAAa,CAACG,OAAO,GAAG,IAAI;IAC9B;EAEF,CAAC,EAAE,CAACP,MAAM,EAAEC,KAAK,EAAEC,GAAG,CAAC,CAAC;EAExB,OAAOA,GAAG;AACZ;AAACH,EAAA,CAjCQF,MAAM;AAmCf,eAAeA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}