{"ast":null,"code":"import { createReducer } from '@reduxjs/toolkit';\nimport { cityChanger, offersChangerByCity, activeSortOption, loadOffers } from './action';\nimport offers from '../mocks/offers';\nconst cities = ['Paris', 'Cologne', 'Brussels', 'Amsterdam', 'Hamburg', 'Dusseldorf'];\nconst sortOptions = ['Popular', 'Price: low to high', 'Price: high to low', 'Top rated first'];\nconst initialState = {\n  cities: cities,\n  city: cities[0],\n  offers: offers,\n  activeSortOption: 'Popular',\n  sortOptions: sortOptions\n};\nconst reducer = createReducer(initialState, builder => {\n  builder.addCase(cityChanger, (state, action) => {\n    state.city = action.payload.city;\n  });\n  builder.addCase(offersChangerByCity, state => {\n    state.offers = initialState.offers.filter(offer => offer.city.name === state.city);\n  });\n  builder.addCase(activeSortOption, (state, action) => {\n    state.activeSortOption = action.payload.option;\n    switch (action.payload.option) {\n      case 'Popular':\n        state.offers = state.offers = initialState.offers.filter(offer => offer.city.name === state.city);\n        break;\n      case 'Price: low to high':\n        state.offers.sort((a, b) => a.price - b.price);\n        break;\n      case 'Price: high to low':\n        state.offers.sort((a, b) => b.price - a.price);\n        break;\n      case 'Top rated first':\n        state.offers.sort((a, b) => b.rating - a.rating);\n        break;\n    }\n  });\n  builder.addCase(loadOffers, (state, action) => {\n    state.offers = action.payload;\n  });\n});\nexport { reducer };","map":{"version":3,"names":["createReducer","cityChanger","offersChangerByCity","activeSortOption","loadOffers","offers","cities","sortOptions","initialState","city","reducer","builder","addCase","state","action","payload","filter","offer","name","option","sort","a","b","price","rating"],"sources":["C:/Users/Cody/Documents/GitHub/2205815-six-cities-simple-12/project/src/store/reducer.ts"],"sourcesContent":["import {createReducer} from '@reduxjs/toolkit';\r\nimport { cityChanger, offersChangerByCity, activeSortOption, loadOffers } from './action';\r\nimport offers from '../mocks/offers';\r\n\r\nconst cities: string[] = ['Paris', 'Cologne', 'Brussels', 'Amsterdam', 'Hamburg', 'Dusseldorf'];\r\nconst sortOptions: string[] = ['Popular', 'Price: low to high', 'Price: high to low', 'Top rated first'];\r\n\r\nconst initialState = {\r\n  cities: cities,\r\n  city: cities[0],\r\n  offers: offers,\r\n  activeSortOption: 'Popular',\r\n  sortOptions: sortOptions,\r\n};\r\n\r\nconst reducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(cityChanger, (state, action) => {\r\n      state.city = action.payload.city;\r\n    });\r\n  builder\r\n    .addCase(offersChangerByCity, (state) => {\r\n      state.offers = initialState.offers.filter((offer) => offer.city.name === state.city);\r\n    });\r\n  builder\r\n    .addCase(activeSortOption, (state, action) => {\r\n      state.activeSortOption = action.payload.option;\r\n      switch(action.payload.option) {\r\n        case 'Popular':\r\n          state.offers = state.offers = initialState.offers.filter((offer) => offer.city.name === state.city);\r\n          break;\r\n        case 'Price: low to high':\r\n          state.offers.sort((a,b) => a.price - b.price);\r\n          break;\r\n        case 'Price: high to low':\r\n          state.offers.sort((a,b) => b.price - a.price);\r\n          break;\r\n        case 'Top rated first':\r\n          state.offers.sort((a,b) => b.rating - a.rating);\r\n          break;\r\n      }\r\n    });\r\n  builder\r\n    .addCase(loadOffers, (state, action) => {\r\n      state.offers = action.payload;\r\n    });\r\n\r\n\r\n});\r\n\r\nexport {reducer};\r\n"],"mappings":"AAAA,SAAQA,aAAa,QAAO,kBAAkB;AAC9C,SAASC,WAAW,EAAEC,mBAAmB,EAAEC,gBAAgB,EAAEC,UAAU,QAAQ,UAAU;AACzF,OAAOC,MAAM,MAAM,iBAAiB;AAEpC,MAAMC,MAAgB,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,YAAY,CAAC;AAC/F,MAAMC,WAAqB,GAAG,CAAC,SAAS,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,iBAAiB,CAAC;AAExG,MAAMC,YAAY,GAAG;EACnBF,MAAM,EAAEA,MAAM;EACdG,IAAI,EAAEH,MAAM,CAAC,CAAC,CAAC;EACfD,MAAM,EAAEA,MAAM;EACdF,gBAAgB,EAAE,SAAS;EAC3BI,WAAW,EAAEA;AACf,CAAC;AAED,MAAMG,OAAO,GAAGV,aAAa,CAACQ,YAAY,EAAGG,OAAO,IAAK;EACvDA,OAAO,CACJC,OAAO,CAACX,WAAW,EAAE,CAACY,KAAK,EAAEC,MAAM,KAAK;IACvCD,KAAK,CAACJ,IAAI,GAAGK,MAAM,CAACC,OAAO,CAACN,IAAI;EAClC,CAAC,CAAC;EACJE,OAAO,CACJC,OAAO,CAACV,mBAAmB,EAAGW,KAAK,IAAK;IACvCA,KAAK,CAACR,MAAM,GAAGG,YAAY,CAACH,MAAM,CAACW,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACR,IAAI,CAACS,IAAI,KAAKL,KAAK,CAACJ,IAAI,CAAC;EACtF,CAAC,CAAC;EACJE,OAAO,CACJC,OAAO,CAACT,gBAAgB,EAAE,CAACU,KAAK,EAAEC,MAAM,KAAK;IAC5CD,KAAK,CAACV,gBAAgB,GAAGW,MAAM,CAACC,OAAO,CAACI,MAAM;IAC9C,QAAOL,MAAM,CAACC,OAAO,CAACI,MAAM;MAC1B,KAAK,SAAS;QACZN,KAAK,CAACR,MAAM,GAAGQ,KAAK,CAACR,MAAM,GAAGG,YAAY,CAACH,MAAM,CAACW,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACR,IAAI,CAACS,IAAI,KAAKL,KAAK,CAACJ,IAAI,CAAC;QACnG;MACF,KAAK,oBAAoB;QACvBI,KAAK,CAACR,MAAM,CAACe,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAKD,CAAC,CAACE,KAAK,GAAGD,CAAC,CAACC,KAAK,CAAC;QAC7C;MACF,KAAK,oBAAoB;QACvBV,KAAK,CAACR,MAAM,CAACe,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAKA,CAAC,CAACC,KAAK,GAAGF,CAAC,CAACE,KAAK,CAAC;QAC7C;MACF,KAAK,iBAAiB;QACpBV,KAAK,CAACR,MAAM,CAACe,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAKA,CAAC,CAACE,MAAM,GAAGH,CAAC,CAACG,MAAM,CAAC;QAC/C;IAAM;EAEZ,CAAC,CAAC;EACJb,OAAO,CACJC,OAAO,CAACR,UAAU,EAAE,CAACS,KAAK,EAAEC,MAAM,KAAK;IACtCD,KAAK,CAACR,MAAM,GAAGS,MAAM,CAACC,OAAO;EAC/B,CAAC,CAAC;AAGN,CAAC,CAAC;AAEF,SAAQL,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}